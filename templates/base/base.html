{% load static %}
<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    
    <!-- Primary Meta Tags -->
    <title>{% block title %}Вымпел-45 | Производство противопожарных металлоизделий{% endblock %}</title>
    <meta name="description" content="{% block description %}Производство противопожарных металлоизделий с 1999 года. Двери, шкафы, щиты, ворота. Сертифицированная продукция с гарантией 25 лет.{% endblock %}">
    <meta name="keywords" content="{% block keywords %}противопожарные двери, пожарные шкафы, металлоизделия, Киров, производство, ГОСТ, сертификация{% endblock %}">
    <meta name="author" content="{{ company_info.name|default:'Вымпел-45' }}">
    <meta name="robots" content="index, follow">
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    <link rel="manifest" href="{% static 'site.webmanifest' %}">
    <meta name="theme-color" content="#d51b1b">
    <meta name="msapplication-TileColor" content="#d51b1b">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Montserrat:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Critical CSS -->
    <style>
        :root {
            /* Fire colors - тематика огня */
            --fire-primary: #d51b1b;
            --fire-accent: #ff6b00;
            --fire-secondary: #ff4500;
            --fire-yellow: #ffa500;
            --fire-red-dark: #8b0000;
            
            /* Safety/Material colors - безопасность и материалы */
            --steel-gray: #708090;
            --steel-light: #b0c4de;
            --safety-blue: #4169e1;
            --safety-green: #228b22;
            --metal-dark: #2f4f4f;
            --metal-light: #e6e6fa;
            
            /* Backgrounds */
            --bg-primary: #f8fafc;
            --bg-steel: #f1f5f9;
            --bg-fire: #fff5f0;
            --bg-warm: #fef7f0;
        }
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            margin: 0; 
            background-color: var(--bg-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .font-brand { 
            font-family: 'Montserrat', 'Inter', sans-serif; 
        }
        

        html, body {
            overflow-x: hidden;
            max-width: 100vw;
        }
        
        @media (max-width: 1023px) {
            .lg\\:hidden.fixed {
                width: 100%;
                max-width: 100vw;
                left: 0;
                right: 0;
            }
            
            .lg\\:hidden .flex {
                min-width: 0;
                max-width: 100%;
            }
            
            .font-brand {
                max-width: calc(100vw - 8rem);
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }
        }

        @media (max-width: 1023px) {
            main {
                padding-top: 4rem;
                padding-bottom: 6rem; 
            }
        }
        
        @media (min-width: 1024px) {
            main {
                padding-top: 5rem;
            }
        }
        
        /* Focus styles */
        *:focus {
            outline: 2px solid var(--fire-accent);
            outline-offset: 2px;
        }
        
        /* Skip to main content */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--fire-accent);
            color: white;
            padding: 8px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
            z-index: 10000;
            transition: top 0.3s;
        }
        
        .skip-link:focus {
            top: 6px;
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Line clamp utility */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            html {
                scroll-behavior: auto;
            }
        }
    </style>
    
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="{% static 'css/output.css' %}">
    <link rel="stylesheet" href="{% static 'css/animate.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/swiper-bundle.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/fontawesome/css/all.min.css' %}">

    
    <!-- Additional CSS -->
    {% block extra_css %}{% endblock %}
</head>

<body class="bg-slate-50 text-gray-900 font-sans antialiased overflow-x-hidden">
    <!-- Skip to main content -->
    <a href="#main-content" class="skip-link">Перейти к основному содержанию</a>
    
    <!-- Header -->
    {% include "base/header.html" %}
    
    <!-- Main Content -->
    <main id="main-content" role="main">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    {% include "base/footer.html" %}
    
    <!-- Back to Top Button -->
    <button id="backToTop" 
            class="fixed w-12 h-12 text-white rounded-full shadow-lg transition-all duration-300 opacity-0 invisible hover:scale-110 z-40"
            style="bottom: 6rem; right: 1rem; background: linear-gradient(135deg, #ff6b00 0%, #ff4500 100%);"
            aria-label="Вернуться наверх">
        <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
        </svg>
    </button>
    
    <!-- External Scripts -->
    <script src="{% static 'js/alpine.min.js' %}" defer></script>
    <script src="{% static 'js/swiper-bundle.min.js'%}"defer></script>
    <script src="{% static 'js/main.js' %}" defer></script>
    
    <!-- Page specific JavaScript -->
    {% block extra_js %}{% endblock %}
    
    <!-- Schema.org structured data for specific pages -->
    {% block structured_data %}{% endblock %}
    
    <!-- Error tracking (production only) -->
    {% if not debug %}
    <script>
        window.addEventListener('error', function(e) {
            console.error('JavaScript Error:', e.error);
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled Promise Rejection:', e.reason);
        });
    </script>
    {% endif %}

    <style>
        /* Стили для кнопки "Наверх" на мобильных */
        @media (min-width: 1024px) {
            #backToTop {
                bottom: 1.5rem !important;
                right: 1.5rem !important;
            }
        }
        
        /* Анимация свечения для кнопки */
        #backToTop {
            box-shadow: 0 4px 15px rgba(255, 107, 0, 0.3);
        }
        
        #backToTop:hover {
            box-shadow: 0 8px 25px rgba(255, 107, 0, 0.5);
            background: linear-gradient(135deg, #ff4500 0%, #d51b1b 100%) !important;
        }
    </style>
</body>
</html>